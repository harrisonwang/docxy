# Docxy

![og-image](og-image.png)

[![English](https://img.shields.io/badge/English-Click-orange)](README_EN.md)
[![็ฎไฝไธญๆ](https://img.shields.io/badge/็ฎไฝไธญๆ-็นๅปๆฅ็-blue)](README.md)
[![ะัััะบะธะน](https://img.shields.io/badge/ะัััะบะธะน-ะะฐะถะผะธัะต-orange)](README_RU.md)
[![Espaรฑol](https://img.shields.io/badge/Espaรฑol-Clic-blue)](README_ES.md)
[![ํ๊ตญ์ด](https://img.shields.io/badge/ํ๊ตญ์ด-ํด๋ฆญ-orange)](README_KR.md)
[![ุงูุนุฑุจูุฉ](https://img.shields.io/badge/ุงูุนุฑุจูุฉ-ุงููุฑ-blue)](README_AR.md)
[![Tรผrkรงe](https://img.shields.io/badge/Tรผrkรงe-Tฤฑkla-orange)](README_TR.md)

ุฎุฏูุฉ ูููู ุตูุฑ Docker ุฎูููุฉ ุงููุฒูุ ูุตููุฉ ูุญู ูุดููุฉ ุงููุตูู ุงููููุฏ ุฅูู Docker Hub ูู ุงูุจุฑ ุงูุฑุฆูุณู ููุตูู.

> ๐ข **ุจุฑูุงูุฌ ุชุนูููู ูููุฏููุฉ:** [**ูู ูุฏุงุนูุง ููููุฉ ุงุชุตุงู Docker Hub! ุฃูุดุฆ ูุณุฑุน ุงูุตูุฑ ุงูุญุตุฑู ุงูุฎุงุต ุจู ุจุงุณุชุฎุฏุงู Docxy**](https://voxsay.com/posts/docxy-docker-proxy-tutorial-for-china/)

## ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ

*   ๐ **ูุดุฑ ุจููุฑุฉ ูุงุญุฏุฉ**: ูููุฑ ุจุฑูุงูุฌูุง ูุตููุง ุขูููุง `install.sh` ูุฅุนุฏุงุฏ ุงูุจูุฆุฉ ุจููุฑุฉ ูุงุญุฏุฉุ ูุชุทุจูู ุงูุดูุงุฏุงุช (Let's Encrypt)ุ ููุดุฑ ุงูุฎุฏูุฉุ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุชุฏุฎู ูุฏูู.

*   ๐ฆ **ุฃูุถุงุน ูุดุฑ ูุชุนุฏุฏุฉ**:
    *   **ูุณุชูู**: ูุธููุฉ TLS ูุฏูุฌุฉุ ุชููุฑ ุฎุฏูุฉ HTTPS ูุจุงุดุฑุฉ.
    *   **ูููู Nginx**: ูููู ุฃู ูุนูู ูุน Nginx ูุฎุฏูุฉ ุฎูููุฉ.
    *   **ุฃุตู CDN**: ูุฏุนู ูุถุน HTTPุ ููู ููุงุณุจ ูุชูุงูู CDN.

*   โก **ุชุณุฌูู ุงูุฏุฎูู ูุฒูุงุฏุฉ ูุนุฏู ุงูุณุญุจ**: ูุณูุญ ูููุณุชุฎุฏููู ุจุงููุตุงุฏูุฉ ุจุงุณุชุฎุฏุงู ุญุณุงุจุงุชูู ุงูุดุฎุตูุฉ ูู Docker Hub ุนุจุฑ `docker login`ุ ููุง ูุฒูุฏ ูู ุญุฏ ูุนุฏู ุงูุณุญุจ ูููุณุชุฎุฏููู ุงููุฌููููู (10 ุณุญูุจุงุช/ุณุงุนุฉ/IP) ุฅูู ุงููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู (100 ุณุญุจ/ุณุงุนุฉ/ุญุณุงุจ).

*   ๐ **ูููู ุดูุงู ุชูุงููุง**: ูุชูุงูู ุชูุงููุง ูุน Docker Registry V2 API. ูุญุชุงุฌ ุงูุนููุงุก ููุท ุฅูู ุชุนุฏูู ุนููุงู ูุตุฏุฑ ุงููุฑุขุฉุ ุฏูู ููุญูู ุชุนูููู ุฅุถุงูู ุฃู ุชุบููุฑุงุช ูู ุนุงุฏุงุช ุงูุงุณุชุฎุฏุงู.

*   ๐ก๏ธ **ุฃุฏุงุก ุนุงูู ูุฃูุงู**: ูุจูู ุจุงุณุชุฎุฏุงู **Rust** ู **Actix Web**ุ ููุง ูููุฑ ุฃุฏุงุกู ููุชุงุฒูุง ูุฃูุงููุง ููุฐุงูุฑุฉ. ูุณุชุฎุฏู ุงูุจุซ ูุชุฑุญูู ุงูุตูุฑุ ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงููููุงุช ุงูุนุงูุฉ.

## ุงูุชุซุจูุช ูุงููุดุฑ

ูุญู ููุฏู ุจุฑูุงูุฌูุง ูุตููุง ููุชุซุจูุช ุจููุฑุฉ ูุงุญุฏุฉ ูุชุจุณูุท ุนูููุฉ ุงููุดุฑ. ูุจู ุงูุจุฏุกุ ูุฑุฌู ุงูุชุฃูุฏ ูู ุญู ุงุณู ุงููุฌุงู ุงูุฎุงุต ุจู ุฅูู ุงููุถูู ุงููุฏู.

```bash
bash <(curl -Ls https://raw.githubusercontent.com/harrisonwang/docxy/main/install.sh)
```

ุณูุฑุดุฏู ุงูุจุฑูุงูุฌ ุงููุตู ุฎูุงู ุงูุชุซุจูุช ูููุฏู ุฃูุถุงุน ุงููุดุฑ ุงูุซูุงุซุฉ ุงูุชุงููุฉ:

---

### ุงููุถุน ุงูุฃูู: ูุณุชูู (HTTPS)

ูุฐุง ูู ุงููุถุน ุงูุฃุจุณุท ูุงูุฃูุซุฑ ุชูุตูุฉ. ุณูุณุชูุน Docxy ูุจุงุดุฑุฉ ุนูู ุงูููุงูุฐ 80 ู 443ุ ููููุฑ ุฎุฏูุฉ ูููู HTTPS ูุงููุฉ.

**ุงูููุฒุงุช:**
- ูุง ุญุงุฌุฉ ูุชูููู ุฎุงุฏู ููุจ ุฅุถุงูู.
- ูุชุนุงูู ุชููุงุฆููุง ูุน ุฅุนุงุฏุฉ ุชูุฌูู HTTP ุฅูู HTTPS.
- ุฎูุงุฑ ุงูุชูุฏูู ุงูุชููุงุฆู ูุดูุงุฏุงุช Let's Encrypt ุฃู ุงุณุชุฎุฏุงู ุดูุงุฏุงุชู ุงูุฎุงุตุฉ.

**ุนูููุฉ ุงูุชุซุจูุช:**
1.  ูู ุจุชุดุบูู ุจุฑูุงูุฌ ุงูุชุซุจูุช ุจููุฑุฉ ูุงุญุฏุฉ.
2.  ุนูุฏ ุงููุทุงูุจุฉ ุจุงุฎุชูุงุฑ ุงููุถุนุ ุฃุฏุฎู `1` ุฃู ุงุถุบุท Enter ุจุจุณุงุทุฉ.
3.  ุงุชุจุน ุงููุทุงูุจุงุช ูุฅุฏุฎุงู ุงุณู ุงููุฌุงู ุงูุฎุงุต ุจู ูุงุฎุชูุงุฑ ุทุฑููุฉ ูุนุงูุฌุฉ ุงูุดูุงุฏุฉ.
4.  ุณูููู ุงูุจุฑูุงูุฌ ุงููุตู ุชููุงุฆููุง ุฌููุน ุงูุชููููุงุช ููุจุฏุฃ ุงูุฎุฏูุฉ.

---

<details>
<summary>ุงููุถุน ุงูุซุงูู: ูููู Nginx ุงูุนูุณู (ูุชูุฏู)</summary>

### ุงููุถุน ุงูุซุงูู: ูููู Nginx ุงูุนูุณู

ูุฐุง ุงููุถุน ููุงุณุจ ุฅุฐุง ูุงู ูุฏูู ุจุงููุนู Nginx ูุชุฑุบุจ ูู ุฅุฏุงุฑุฉ ุฎุฏูุงุช ุงูููุจ ูุฑูุฒููุง ูู ุฎูุงูู.

**ุงูููุฒุงุช:**
- ูุชุนุงูู Nginx ูุน ุชุดููุฑ HTTPS ูุฅุฏุงุฑุฉ ุงูุดูุงุฏุงุชุ ูุน ุชุดุบูู Docxy ูุฎูููุฉ HTTP ุจุณูุทุฉ.
- ูุนูู Docxy ูุฎุฏูุฉ HTTP ุฎูููุฉ ุนูู ูููุฐ ูุญุฏุฏ (ุนูู ุณุจูู ุงููุซุงูุ 9000).
- ููุงุณุจ ููุชูุงูู ูุน ุงูุฎุฏูุงุช ุงูุฃุฎุฑู.

**ุนูููุฉ ุงูุชุซุจูุช:**
1.  ูู ุจุชุดุบูู ุจุฑูุงูุฌ ุงูุชุซุจูุช ุจููุฑุฉ ูุงุญุฏุฉ.
2.  ุนูุฏ ุงููุทุงูุจุฉ ุจุงุฎุชูุงุฑ ุงููุถุนุ ุฃุฏุฎู `2`.
3.  ุงุชุจุน ุงููุทุงูุจุงุช ูุฅุฏุฎุงู ุงุณู ุงููุฌุงู ุงูุฎุงุต ุจูุ ููููุฐ ุงูุงุณุชูุงุน ุงูุฎููู ูู Docxyุ ููุนูููุงุช ุงูุดูุงุฏุฉ.
4.  ุณูููู ุงูุจุฑูุงูุฌ ุงููุตู ุชููุงุฆููุง ุจุฅูุดุงุก ููู ุชูููู Nginx ูููุฐุฌู ูู. ุณุชุญุชุงุฌ ุฅูู ุฅุถุงูุชู ูุฏูููุง ุฅูู ุชูููู Nginx ุงูุฎุงุต ุจู ูุฅุนุงุฏุฉ ุชุญููู ุฎุฏูุฉ Nginx.

</details>

---

<details>
<summary>ุงููุถุน ุงูุซุงูุซ: ุฃุตู CDN (HTTP) (ูุชูุฏู)</summary>

### ุงููุถุน ุงูุซุงูุซ: ุฃุตู CDN (HTTP)

ูุฐุง ุงููุถุน ููุงุณุจ ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงุณุชุฎุฏุงู Docxy ูุฃุตู ูู CDN ูุชุญููู ุชุณุฑูุน ุนุงููู ุฃูุถู.

**ุงูููุฒุงุช:**
- ูุณุชูุน Docxy ููุท ุนูู ููุงูุฐ HTTP.
- ูุชุนุงูู ูุฒูุฏ CDN ูุน ุทูุจุงุช HTTPS ูุงูุดูุงุฏุงุช.
- ูุซู Docxy ููุนุงูุฌ ุฑุคูุณ `X-Forwarded-*` ูุชุญุฏูุฏ ุนููุงู IP ุงูุนููู ูุงูุจุฑูุชูููู ุจุดูู ุตุญูุญ.

**ุนูููุฉ ุงูุชุซุจูุช:**
1.  ูู ุจุชุดุบูู ุจุฑูุงูุฌ ุงูุชุซุจูุช ุจููุฑุฉ ูุงุญุฏุฉ.
2.  ุนูุฏ ุงููุทุงูุจุฉ ุจุงุฎุชูุงุฑ ุงููุถุนุ ุฃุฏุฎู `3`.
3.  ุงุชุจุน ุงููุทุงูุจุงุช ูุฅุฏุฎุงู ูููุฐ HTTP ุงูุฐู ูุฌุจ ุฃู ูุณุชูุน ุฅููู Docxy.
4.  ูู ุจุชูููู ุฎุฏูุฉ CDN ุงูุฎุงุตุฉ ุจู ูุชูุฌูู ุฃุตููุง ุฅูู ุนููุงู ููููุฐ ุฎุฏูุฉ Docxy.

</details>


## ุงุณุชุฎุฏุงู ุนููู Docker

ูู ุจุชูููู ุนููู Docker ุงูุฎุงุต ุจู ูุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงููููู ุงูุฎุงุตุฉ ุจู.

### ุงูุทุฑููุฉ ุงูุฃููู: ุงูุงุณุชุฎุฏุงู ุงููุฌููู (ุงูุชูููู ุงูุฃุณุงุณู)

ูุฐุง ูู ุงูุชูููู ุงูุฃุณุงุณูุ ุงูุฐู ููุฌู ุทูุจุงุช Docker ุงูุงูุชุฑุงุถูุฉ ุฅูู ุฎุฏูุฉ ุงููููู ุงูุฎุงุตุฉ ุจู.

1.  **ุชูููู Docker Daemon**

    ูู ุจุชุญุฑูุฑ ููู `/etc/docker/daemon.json` (ุฃูุดุฆู ุฅุฐุง ูู ููู ููุฌูุฏูุง) ูุฃุถู ุงููุญุชูู ุงูุชุงูู. ุงุณุชุจุฏู `your-domain.com` ุจุงุณู ุงููุฌุงู ุงูุฎุงุต ุจู.

    ```json
    {
      "registry-mirrors": ["https://your-domain.com"]
    }
    ```

2.  **ุฅุนุงุฏุฉ ุชุดุบูู ุฎุฏูุฉ Docker**

    ```bash
    sudo systemctl restart docker
    ```
    ุงูุขูุ ุณูููู `docker pull` ุจุณุญุจ ุงูุตูุฑ ูู ุฎูุงู ุงููููู ุงูุฎุงุต ุจู.

<details>
<summary>ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงุณุชุฎุฏุงู ุชุณุฌูู ุงูุฏุฎูู (ุฒูุงุฏุฉ ูุนุฏู ุงูุณุญุจ)</summary>

ุชุณูุญ ูู ูุฐู ุงูุทุฑููุฉ ุจุงูุญุตูู ุนูู ูุนุฏู ุณุญุจ ุตูุฑ ุฃุนูู ุนู ุทุฑูู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ุญุณุงุจ Docker Hub ุงูุฎุงุต ุจูุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุงุณุชุฎุฏุงู ุงููุฌููู.

1.  **ุฅููุงู ุงูุชูููู ุงูุฃุณุงุณู**

    ูุฑุฌู ุงูุชุฃูุฏ ูู ุฅููุงู ุฌููุน ุงูุฎุทูุงุช ูู **ุงูุทุฑููุฉ ุงูุฃููู**.

2.  **ุชุณุฌูู ุงูุฏุฎูู ุฅูู ุฎุฏูุฉ ุงููููู**

    ุงุณุชุฎุฏู ุงูุฃูุฑ `docker login` ูุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ุงูุฎุงุตูู ุจู ูู Docker Hub.

    ```bash
    docker login your-domain.com
    ```

3.  **ูุฒุงููุฉ ูุนูููุงุช ุงููุตุงุฏูุฉ**

    ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญุ ุชุญุชุงุฌ ุฅูู ุชุญุฑูุฑ ููู `~/.docker/config.json` ูุฏูููุง. ุงูุณุฎ ูุนูููุงุช `auth` ุงูุชู ุชู ุฅูุดุงุคูุง ูู `your-domain.com` ูุงูุตููุง ูู `https://index.docker.io/v1/`.

    ูุจู ุงูุชุนุฏูู:
    ```json
    {
        "auths": {
            "your-domain.com": {
                "auth": "aBcDeFgHiJkLmNoPqRsTuVwXyZ..."
            }
        }
    }
    ```

    ุจุนุฏ ุงูุชุนุฏูู:
    ```json
    {
        "auths": {
            "your-domain.com": {
                "auth": "aBcDeFgHiJkLmNoPqRsTuVwXyZ..."
            },
            "https://index.docker.io/v1/": {
                "auth": "aBcDeFgHiJkLmNoPqRsTuVwXyZ..."
            }
        }
    }
    ```
    ุจุนุฏ ุญูุธ ุงููููุ ุณูุชู ุฅุฑุณุงู ุทูุจุงุช `docker pull` ุงูุฎุงุตุฉ ุจู ููุณุชุฎุฏู ูุตุงุฏู ุนูููุ ูุจุงูุชุงูู ุณุชุชูุชุน ุจุญุฏูุฏ ูุนุฏู ุฃุนูู.

</details>

## ุงูุชุทููุฑ

> [!NOTE]
> ููุญุตูู ุนูู ุฎูููุฉ ุชูููุฉ ููุตูุฉุ ูููุฏุณุฉ ุงููุธุงูุ ููุจุงุฏุฆ ุงูุชูููุฐุ ูุฑุฌู ุงูุฑุฌูุน ุฅูู [**ูุซููุฉ ุงูุจููุฉ ุงูุชูููุฉ ูุงููุจุงุฏุฆ**](docs/ARCHITECTURE.md).

1.  **ุงุณุชูุณุงุฎ ุงููุณุชูุฏุน**
    ```bash
    git clone https://github.com/harrisonwang/docxy.git
    cd docxy
    ```

2.  **ุชุนุฏูู ููู ุงูุชูููู**
    ุงูุชุญ `config/default.toml` ููู ุจุชุนุฏูู ูุณู `[server]` ููุชุฃูุฏ ูู ุชูููู ุฎุฏูุฉ HTTP ูุชุนุทูู ุฎุฏูุฉ HTTPS. ููููู ุชุนููู ุงููููุฐ ุฅูู 8080 ูุชุฌูุจ ุงุณุชุฎุฏุงู ุงูููุงูุฐ ุงููููุฒุฉ ูู ุจูุฆุฉ ุงูุชุทููุฑ.

    ```toml
    # config/default.toml

    [server]
    http_port = 8080      # ุงุณุชุฎุฏู ูููุฐ ุบูุฑ ูููุฒ
    https_port = 8443
    http_enabled = true   # ุชูููู HTTP
    https_enabled = false # ุชุนุทูู HTTPS
    behind_proxy = true
    ```

3.  **ุชุดุบูู ุงููุดุฑูุน**
    ุงูุขูุ ููููู ุชุดุบูู ุงููุดุฑูุน ูุจุงุดุฑุฉ ุจุงุณุชุฎุฏุงู `cargo`.
    ```bash
    cargo run
    ```
    ุณุชุจุฏุฃ ุงูุฎุฏูุฉ ูุชุณุชูุน ุนูู `http://0.0.0.0:8080`.

4.  **ุจูุงุก ุฅุตุฏุงุฑ ุงูุฅุตุฏุงุฑ**
    ```bash
    cargo build --release
    ```

## ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุจููุฌุจ ุชุฑุฎูุต MIT. ุฑุงุฌุน [LICENSE](LICENSE) ููุฒูุฏ ูู ุงููุนูููุงุช.